/* Auto-split from style.css ‚Äî do not edit here if you still maintain the monolith. */
/* Section: layout */

/* –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä */
#main-container {
  display: flex;
  align-items: flex-start; /* –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ –ø–æ –≤–µ—Ä—Ö—É */
  gap: 20px;
}

#content-row {
  display: flex;
  align-items: flex-start; /* üîë —Ç–µ–ø–µ—Ä—å –í–ï–†–• –°–û–í–ü–ê–î–ê–ï–¢ */
  gap: 20px;
}

/* –°—Ç–∞—Ç—É—Å (–í—ã | –†–æ–ª—å) */
#status-bar {
  font-weight: bold;
  color: #fff;
  margin-bottom: 10px;
}

/* —Å—Ç—Ä–æ–∫–∞: —Ü–≤–µ—Ç + —Ä–∞–∑–º–µ—Ä */
.pm-row{ display:flex; align-items:center; gap: 10px; }

.pm-size{
  display: flex;
  align-items: center;
  gap: 6px;
  min-width: 0;
}

/* –¥–≤–µ –≥–∞–ª–æ—á–∫–∏ –≤ –∫–æ–ª–æ–Ω–∫–µ */
.pm-types{
  display: flex;
  flex-direction: column;
  gap: 6px;
  min-width: 0;
}

/* –ò–≥—Ä–æ–≤–∞—è –æ–±–ª–∞—Å—Ç—å */
#game-container {
  display: flex;
  flex-direction: column;
  align-items: center;      /* ‚¨Ö —Ü–µ–Ω—Ç—Ä–∏—Ä—É–µ–º –°–û–î–ï–†–ñ–ò–ú–û–ï */
  gap: 10px;

  /* –ö–õ–Æ–ß–ï–í–û–ï */
  margin: 0 auto;           /* ‚¨Ö —Ü–µ–Ω—Ç—Ä–∏—Ä—É–µ–º –∫–æ–ª–æ–Ω–∫—É */
  max-width: auto;   /* ‚¨Ö —à–∏—Ä–∏–Ω–∞ = –∫–æ–Ω—Ç–µ–Ω—Ç (–ø–æ–ª–µ) */
}

/* –†—è–¥ —Ä–∞–º–æ–∫ —Ä–∞–∑–º–µ—Ä–æ–≤ (–ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∞—è —Ä–∞–º–∫–∞ + GM-–∫–∞—Ä—Ç–∞) */
.board-settings-row{
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  justify-content: center;
  align-items: flex-start;
  margin-bottom: 6px;
}

/* UI: —Å—Ç—Ä–æ–∫–∞ URL –ø–æ–¥–ª–æ–∂–∫–∏ */
.env-bg-url-row {
  display: flex;
  gap: 8px;
  margin: 6px 0 8px;
}

.env-bg-url-row input[type="text"] {
  flex: 1;
  min-width: 0;
}

.token-hpbar .txt{
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 10px;
  line-height: 10px;
  font-weight: 700;
  color: #fff;
  text-shadow: 0 1px 2px rgba(0,0,0,0.9);
}

.token-mini .row{
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
  margin-bottom: 6px;
}

.token-mini .hp-fields{
  display: flex;
  gap: 6px;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 8px;
}

.token-mini .hp-field{
  display: flex;
  flex-direction: column;
  gap: 4px;
  flex: 1 1 0;
  min-width: 0;
}

.token-mini .hp-delta{
  display: grid;
  grid-template-columns: 34px 1fr 34px;
  gap: 6px;
  align-items: center;
}

.token-mini .triple{
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 6px;
  margin-bottom: 8px;
}

.token-mini .mini-box{
  border: 1px solid rgba(255,255,255,0.10);
  background: rgba(0,0,0,0.18);
  border-radius: 10px;
  padding: 6px 8px;
  display: flex;
  align-items: baseline;
  justify-content: space-between;
  gap: 8px;
  min-width: 0;
}

.token-mini .stats-grid{
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 6px;
}

.token-mini .stat-box{
  border: 1px solid rgba(255,255,255,0.10);
  background: rgba(0,0,0,0.18);
  border-radius: 10px;
  padding: 6px 8px;
  display: flex;
  align-items: baseline;
  justify-content: space-between;
  gap: 8px;
}

/* ===== –ù–æ–≤–∞—è –ø—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞: –§–∞–∑—ã –º–∏—Ä–∞ + –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è ===== */
#current-turn {
  display: flex;
  align-items: center;
  gap: 10px;
  flex-wrap: wrap;
}

#board-row {
  display: flex;
  align-items: flex-start;
  gap: 12px;
}

/* –ö–æ–ª–æ–Ω–∫–∞ —Å –ø–æ–ª–µ–º: —à–∏—Ä–∏–Ω–∞ = —à–∏—Ä–∏–Ω–∞ –ø–æ–ª—è, —á—Ç–æ–±—ã "–¢–µ–∫—É—â–∏–π –∏–≥—Ä–æ–∫" –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
   –≤—Å–µ–≥–¥–∞ —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–ª–∏—Å—å –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Å–∞–º–æ–≥–æ –ø–æ–ª—è, –∞ –Ω–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–∞–≤–æ–π –ø–∞–Ω–µ–ª–∏ */
#board-col {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px; /* –º–µ–Ω—å—à–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ –ø–æ–ª—è */
  width: auto;
}

/* –í–µ—Ä—Ö–Ω–∏–π –±–ª–æ–∫ –Ω–∞–¥ –ø–æ–ª–µ–º:
   1) "–¢–µ–∫—É—â–∏–π –∏–≥—Ä–æ–∫" ‚Äî –ø–æ —Ü–µ–Ω—Ç—Ä—É –ø–æ–ª—è
   2) —Ä–∞–º–∫–∏ —Ä–∞–∑–º–µ—Ä–æ–≤ ‚Äî —Å–ø—Ä–∞–≤–∞, –ø–æ–¥ —Ç–µ–∫—É—â–∏–º –∏–≥—Ä–æ–∫–æ–º */
#board-topbar {
  width: 100%;
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 2px;
}

#board-settings {
  display: flex;
  flex-direction: row;
  flex-wrap: nowrap;
  align-items: flex-start;
  gap: 10px;
}

.board-settings-box {
  border: 1px solid #444;
  border-radius: 8px;
  background: #141414;
  padding: 6px 8px;
  display: flex;
  align-items: center;
  gap: 6px;
  flex-wrap: nowrap;
  font-size: 13px;
}

.board-settings-box label {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  margin: 0;
  white-space: nowrap;
}

#right-panel {
  width: 260px;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.env-bg-url-row{
  display:flex;
  gap:8px;
  align-items:center;
  margin: 0 0 8px 0;
}

.env-bg-url-row input{
  flex: 1 1 auto;
  min-width: 0;
}

.env-range-title{
  font-size: 12px;
  color: #ddd;
  margin-bottom: 6px;
  display:flex;
  justify-content: space-between;
  gap:8px;
  white-space: nowrap;
}

.type-item {
  display: inline-flex;
  align-items: center;
  gap: 6px;
}

/* –°—Ç—Ä–æ–∫–∞ –ø–æ–¥ –∂—É—Ä–Ω–∞–ª–æ–º: —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ + –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤–∞ */
#action-bottom-row {
  display: flex;
  gap: var(--left-gap);
  align-items: flex-start;
}

/* –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –∏–≥—Ä–æ–∫–∞ */
.placement-indicator {
  width: 10px;
  height: 10px;
  border-radius: 50%;
  display: inline-block;
  margin-right: 6px;
  flex-shrink: 0;
}

.owner-header {
  display: flex;
  align-items: center;
  gap: 8px;
  font-weight: bold;
  margin-bottom: 6px;
}

.modal {
  width: min(900px, 96vw);
  max-height: min(86vh, 900px);
  background: #1b1b1b;
  border: 1px solid #444;
  border-radius: 10px;
  overflow: auto;
  box-shadow: 0 10px 40px rgba(0,0,0,0.6);
  display: flex;
  flex-direction: column;
}

.modal-header {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 12px;
  padding: 12px 14px;
  border-bottom: 1px solid #333;
  background: #161616;
}

.sheet-actions {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  align-items: center;
  margin-bottom: 12px;
}

/* ===== Saved bases (–ø–µ—Ä—Å–æ–Ω–∞–∂–∏ –ø–æ userId) ===== */
.saved-bases-actions {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
}

.saved-bases-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.66);
  backdrop-filter: blur(3px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 9999;
}

.saved-bases-modal {
  width: min(720px, calc(100vw - 24px));
  max-height: min(640px, calc(100vh - 24px));
  overflow: auto;
  background: #111;
  border: 1px solid rgba(255,255,255,0.14);
  border-radius: 14px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.55);
  display: flex;
  flex-direction: column;
}

.saved-bases-head {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 14px;
  border-bottom: 1px solid rgba(255,255,255,0.10);
}

.saved-bases-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.saved-bases-row {
  display: flex;
  gap: 10px;
  align-items: center;
  padding: 10px;
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,0.12);
  background: rgba(255,255,255,0.04);
  cursor: pointer;
}

.saved-bases-row-main {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.saved-bases-footer {
  display: flex;
  gap: 10px;
  padding: 12px 14px;
  border-top: 1px solid rgba(255,255,255,0.10);
}

.sheet-grid {
  display: grid;
  grid-template-columns: repeat(3, minmax(180px, 1fr));
  gap: 10px;
}

.kv {
  display: flex;
  justify-content: space-between;
  gap: 10px;
  font-size: 13px;
  padding: 2px 0;
  border-bottom: 1px dashed rgba(255,255,255,0.08);
}

.modal-body {
  padding: 0;              /* —á—Ç–æ–±—ã sidebar –±—ã–ª –≤—Å—Ç—ã–∫ */
  overflow: auto;        /* —Å–∫—Ä–æ–ª–ª –±—É–¥–µ—Ç –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ */

  /* FIX: —á—Ç–æ–±—ã –ø—Ä–∞–≤–∞—è —á–∞—Å—Ç—å –º–æ–¥–∞–ª–∫–∏ —Å–∫—Ä–æ–ª–ª–∏–ª–∞—Å—å –î–û –ö–û–ù–¶–ê */
  display: flex;
  flex-direction: column;
  min-height: 0;
}

.sheet-layout {
  display: flex;
  flex: 1 1 auto;
  min-height: 0;
  height: 100%;
}

.sheet-tab {
  width: 100%;
  text-align: left;
  border-radius: 8px;
  padding: 8px 10px;
  font-size: 13px;
  border: 1px solid transparent;
  background: transparent;
  color: #ddd;
  display: flex;
  align-items: center;
  gap: 8px;
}

/* –ø—Ä–∞–≤–∞—è —á–∞—Å—Ç—å */
.sheet-main {
  flex: 1;
  overflow: auto;
  padding: 12px 14px;
}

.sheet-hero-top {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 12px;
}

.sheet-chips {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}

.sheet-grid-2 {
  display: grid;
  grid-template-columns: repeat(2, minmax(220px, 1fr));
  gap: 10px;
}

.sheet-grid-3 {
  display: grid;
  grid-template-columns: repeat(3, minmax(180px, 1fr));
  gap: 10px;
}

.kv {
  display: flex;
  justify-content: space-between;
  gap: 10px;
  font-size: 13px;
  padding: 2px 0;
  border-bottom: 1px dashed rgba(255,255,255,0.08);
}

/* ===== DND INFO: abilities layout (LSS-like) ===== */
.ab-grid {
  display: grid;
  grid-template-columns: repeat(2, minmax(260px, 1fr));
  gap: 10px;
}

.ab-head {
  display: flex;
  align-items: baseline;
  justify-content: space-between;
  gap: 10px;
  margin-bottom: 8px;
}

.ab-mini-row {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 8px;
  margin-bottom: 8px;
}

.ab-mini {
  border: 1px solid #444;
  border-radius: 10px;
  background: #171717;
  padding: 6px 8px;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.ab-skills {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.ab-skill {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
  background: #233152;
  border: 1px solid rgba(255,255,255,0.08);
  border-radius: 10px;
  padding: 6px 8px;
}

.ab-skill .left {
  display: flex;
  align-items: center;
  gap: 8px;
  min-width: 0;
}

/* ===== LSS-like abilities layout inside "–û—Å–Ω–æ–≤–Ω–æ–µ" ===== */
.lss-abilities-grid{
  display:grid;
  grid-template-columns: repeat(3, minmax(220px, 1fr));
  gap:12px;
}

@media (max-width: 1100px){
  .lss-abilities-grid{ grid-template-columns: repeat(2, minmax(240px, 1fr)); }
}

@media (max-width: 900px){
  .lss-abilities-grid{ grid-template-columns: 1fr; }
}

.lss-ability-head{
  display:flex;
  align-items:baseline;
  justify-content:space-between;
  gap:10px;
  padding-bottom:4px; /* ‚¨Ö –∫–æ–º–ø–∞–∫—Ç–Ω–µ–µ */
  border-bottom:1px solid rgba(255,255,255,0.08);
}

.lss-ability-actions{
  display:flex;
  gap:8px;            /* ‚¨Ö –º–µ–Ω—å—à–µ */
  margin-top:6px;     /* ‚¨Ö –º–µ–Ω—å—à–µ */
  flex-wrap:wrap;
}

.lss-skill-list{
  margin-top:6px;     /* ‚¨Ö –º–µ–Ω—å—à–µ */
  display:flex;
  flex-direction:column;
  gap:5px;
}

.lss-skill-row{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:8px;
  background:#1a1a1a;
  border:1px solid #333;
  border-radius:10px;
  padding:4px 6px;    /* ‚¨Ö –∫–æ–º–ø–∞–∫—Ç–Ω–µ–µ —Å—Ç—Ä–æ–∫–∞ –Ω–∞–≤—ã–∫–∞ */
}

.lss-skill-left{
  display:flex;
  align-items:center;
  gap:8px;
  min-width:0;
}

.lss-dot{
  width:12px;
  height:12px;
  border-radius:999px;
  border:2px solid rgba(255,255,255,0.35);
  flex:0 0 auto;
}

.lss-skill-name{
  font-size:12px;     /* ‚¨Ö –º–µ–Ω—å—à–µ */
  line-height: 14px;
  color:#eef2ff;
  min-width:0;
  flex:1 1 auto;
}

/* –ø–∞—Å—Å–∏–≤–∫–∏ + –≤–ª–∞–¥–µ–Ω–∏—è */
.lss-bottom-stack{
  display:flex;
  flex-direction:column;
  gap:12px;
  margin-top:12px;
}

/* –ø–∞—Å—Å–∏–≤–Ω—ã–µ —á—É–≤—Å—Ç–≤–∞ ‚Äî –≤ –æ–¥–∏–Ω —Ä—è–¥ (–Ω–∞ —É–∑–∫–∏—Ö —ç–∫—Ä–∞–Ω–∞—Ö –ø–µ—Ä–µ–Ω–µ—Å—ë—Ç—Å—è) */
.lss-passive-rowlist{
  display:flex;
  gap:8px;
  flex-wrap: wrap;
}

.lss-passive-row{
  flex: 1 1 160px;
  display:flex;
  align-items:center;
  gap:10px;
  border:1px solid rgba(255,255,255,0.10);
  background:rgba(255,255,255,0.04);
  border-radius:10px;
  padding:6px 8px;
  margin:0;
}

/* spells slots */
.lss-slots{ display:flex; flex-direction:column; gap:8px; }

.lss-slot{ display:flex; align-items:center; gap:10px; }

.lss-slot-lvl{
  width:28px; height:28px; border-radius:10px;
  display:flex; align-items:center; justify-content:center;
  font-weight:900;
  border:1px solid rgba(255,255,255,0.16);
  background:rgba(255,255,255,0.08);
  color:#fff;
}

.lss-slot-bar{
  flex:1;
  border:1px solid rgba(255,255,255,0.12);
  border-radius:10px;
  background:rgba(255,255,255,0.04);
  padding:6px 10px;
}

/* ===== FIX: modal scrolling inside "–ò–Ω—Ñ–∞" ===== */
/* modal-body —É–∂–µ flex+min-height:0; –≤–∞–∂–Ω–æ –¥–∞—Ç—å sheet-content –∑–∞–Ω–∏–º–∞—Ç—å –≤—ã—Å–æ—Ç—É –∏ –Ω–µ –æ–±—Ä–µ–∑–∞—Ç—å—Å—è */
.sheet-content{
  display:flex;
  flex-direction:column;
  flex: 1 1 auto;
  min-height: 0;
  overflow: auto;
}

/* —à–∞–ø–∫–∞ (hero) —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è, —Å–∫—Ä–æ–ª–ª ‚Äî –≤ –ø—Ä–∞–≤–æ–π —á–∞—Å—Ç–∏ (sheet-main) */
.sheet-hero{
  flex: 0 0 auto;
}

.notes-toolbar{
  display:flex;
  justify-content:flex-end;
  margin-bottom: 10px;
}

.notes-list{
  display:flex;
  flex-direction:column;
  gap:10px;
}

.note-header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  margin-bottom: 8px;
}

.note-title{
  flex:1 1 auto;
  min-width: 0;
  background:#111;
  color:#fff;
  border: 1px solid #555;
  border-radius: 8px;
  padding: 4px 8px;
  font-size: 13px;
}

.note-actions{
  display:flex;
  gap:6px;
  flex:0 0 auto;
}

.notes-details-grid .kv{
  border-bottom: 1px dashed rgba(255,255,255,0.08);
}

.spell-metrics {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
}

.spell-metric {
  flex: 1 1 220px;
  border: 1px solid rgba(255,255,255,0.18);
  border-radius: 12px;
  padding: 8px 10px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  min-height: 44px;
}

/* Slots grid (1..9) in 3 rows */
.slots-frame {
  width: 100%;
  border: 1px solid rgba(255,255,255,0.18);
  border-radius: 14px;
  padding: 10px;
}

.slots-grid {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 10px;
}

.slot-top {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
}

.slot-nums {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 16px;
  font-weight: 700;
}

.slot-dots {
  margin-top: 8px;
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  min-height: 14px;
}

@media (max-width: 820px) {
  .slots-grid { grid-template-columns: repeat(2, minmax(0, 1fr)); }
}

@media (max-width: 520px) {
  .slots-grid { grid-template-columns: 1fr; }
}

/* ===== Spells: add button + description cards ===== */
.spells-level-header{
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  margin-bottom: 6px;
}

.spell-item-head{
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
}

.weapons-list{ display:flex; flex-direction:column; gap:10px; }

.weapon-head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  margin-bottom:10px;
}

.weapon-actions{ display:flex; align-items:center; gap:8px; }

.weapon-grid{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap:10px 12px;
}

@media (max-width: 860px){
  .weapon-grid{ grid-template-columns: 1fr; }
}

.weapon-row{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
}

.weapon-dmg-row{ align-items:flex-start; }

.weapon-dmg-controls{
  display:flex;
  align-items:center;
  gap:8px;
  flex-wrap:wrap;
  justify-content:flex-end;
}

@media (max-width: 860px){
  .weapons-list{ grid-template-columns: 1fr; }
}

.weapon-head{
  display: grid;
  grid-template-columns: 1fr auto;
  gap: 8px;
  align-items: center;
}

.weapon-head.is-expanded{
  grid-template-columns: 1fr auto;
}

.weapon-head.is-expanded .weapon-title-input{
  grid-column: 1 / -1;
  margin-top: 6px;
}

.weapon-actions{
  display:flex;
  gap:8px;
  justify-content:flex-end;
  flex-wrap:nowrap;
}

.weapon-summary{
  margin-top: 8px;
  border: 1px solid rgba(255,255,255,.14);
  background: rgba(255,255,255,.05);
  border-radius: 12px;
  padding: 8px 10px;

  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
}

.weapon-sum-item{
  display:flex;
  align-items:center;

  /* ‚úÖ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∑–∞–∑–æ—Ä –º–µ–∂–¥—É –ª–µ–π–±–ª–æ–º –∏ –∑–Ω–∞—á–µ–Ω–∏–µ–º */
  gap: 10px;

  /* —á—Ç–æ–±—ã –Ω–∏—á–µ–≥–æ –Ω–µ –ø—Ä–∏–ª–∏–ø–∞–ª–æ –∫ –∫—Ä–∞—è–º */
  padding: 2px 0;

  min-width: 0;
}

.weapon-sum-label{
  display:flex;
  align-items:center;
  gap:8px;
  font-size: 12px;
  opacity: .9;
  min-width: 0;
  white-space: nowrap;
}

.weapon-details-grid{
  margin-top: 10px;
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 10px;
}

@media (max-width: 860px){
  .weapon-details-grid{ grid-template-columns: 1fr; }
}

.weapon-fieldbox-inline{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 10px;
}

.weapon-dmg-edit{ grid-column: 1 / -1; }

.weapon-dmg-mini{
  display:flex;
  gap:8px;
  align-items:center;
  margin-bottom: 8px;
}

/* ===== Spells: header + popups ===== */
.spells-list-header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
}

.popup-overlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.55);
  display:flex;
  align-items:center;
  justify-content:center;
  padding:16px;
  z-index:9999;
}

.popup-head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  margin-bottom:10px;
}

.popup-actions{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
}

.popup-grid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:12px;
}

@media (max-width: 820px){
  .popup-grid{grid-template-columns:1fr;}
}

.db-spell-head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
}

.db-spell-controls{display:flex;gap:8px;}

/* ===== PATCH: Spells actions (–û–ø–∏—Å–∞–Ω–∏–µ + –£–¥–∞–ª–∏—Ç—å) ===== */
.spell-item-actions{
  display:flex;
  flex-direction:column;
  gap:6px;
  flex:0 0 auto;
}

.coins-head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  margin-bottom: 10px;
}

.coins-grid{
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 10px;
  margin-top: 10px;
}

@media (max-width: 860px){
  .coins-grid{ grid-template-columns: 1fr; }
}

.coin-top{
  display: flex;
  align-items: center;
  justify-content: flex-start;
  margin-bottom: 6px;
}

.coin-pill{
  display: inline-flex;
  align-items: center;
  gap: 6px;
  border: 1px solid rgba(255,255,255,0.18);
  background: rgba(0,0,0,0.18);
  border-radius: 10px;
  padding: 3px 8px;
  font-size: 11px;
  font-weight: 900;
  white-space: nowrap;
}

.coin-line{
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: nowrap;
}

.coin-value{
  flex: 1 1 auto;
  min-width: 70px;
  border-radius: 9px;
  border: 1px solid rgba(255,255,255,0.18);
  background: rgba(255,255,255,0.06);
  color: #fff;
  padding: 4px 6px;
  outline: none;
  text-align: center;
  font-weight: 900;
  font-size: 13px;
  height: 28px;
  box-sizing: border-box;
}

.coin-adjust{
  flex: 0 0 auto;
  display: flex;
  align-items: center;
  gap: 5px;
  flex-wrap: nowrap;
}

.coin-btn{
  width: 24px;
  height: 24px;
  border-radius: 8px;
  border: 1px solid rgba(255,255,255,0.18);
  background: rgba(255,255,255,0.06);
  color: #fff;
  font-weight: 900;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 0;
  font-size: 13px;
  line-height: 1;
  box-sizing: border-box;
}

/* Exchange rate tooltip */
.exchange-pill{
  position: relative;
  display: inline-flex;
  align-items:center;
  gap: 6px;
  border: 1px solid rgba(255,255,255,0.18);
  background: rgba(0,0,0,0.18);
  border-radius: 10px;
  padding: 3px 10px;
  font-size: 12px;
  font-weight: 900;
  white-space: nowrap;
  cursor: default;
  user-select: none;
}

.exchange-table{
  display: grid;
  gap: 4px;
}

.ex-row{
  display: grid;
  grid-template-columns: 1.6fr repeat(5, 0.7fr);
  gap: 6px;
}

.coin-box--total .coin-line{
  align-items: flex-start;
}

.hp-popover__panel{
  position: absolute;
  top: 90px;
  left: 50%;
  transform: translateX(-50%);
  width: min(520px, calc(100vw - 28px));
  background: rgba(20,20,20,0.98);
  border: 1px solid rgba(255,255,255,0.15);
  border-radius: 14px;
  box-shadow: 0 18px 50px rgba(0,0,0,0.55);
  padding: 12px;
}

.hp-popover__head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 12px;
  padding-bottom: 10px;
  border-bottom: 1px solid rgba(255,255,255,0.12);
}

.hp-popover__grid{
  padding-top: 10px;
  display: grid;
  gap: 10px;
}

.hp-row{
  display:grid;
  grid-template-columns: 1fr auto;
  align-items: center;
  gap: 10px;
}

.hp-row--delta{
  grid-template-columns: 1fr;
  gap: 8px;
}

.hp-delta{
  display: grid;
  grid-template-columns: 44px 1fr 44px;
  gap: 8px;
  align-items:center;
}

.profile-grid{
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 14px;
}

.profile-col{
  display: grid;
  gap: 8px;
}

@media (max-width: 760px){
  .profile-grid{ grid-template-columns: 1fr; }
}

/* ===== Inspiration chip ===== */
.sheet-chip--insp{
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  user-select: none;
  min-width: 92px;
  min-height: 54px;
}

/* ===== Top line in Basic tab (Exhaustion + Conditions) ===== */
.sheet-topline{
  display: grid;
  grid-template-columns: 170px 1fr;
  gap: 10px;
  margin: 6px 0 10px;
}

@media (max-width: 600px){
  .sheet-topline{
    grid-template-columns: 1fr;
  }
}

.mini-popover__panel{
  position:absolute;
  top: 120px;
  left: 50%;
  transform: translateX(-50%);
  width: min(560px, calc(100vw - 28px));
  background: rgba(20,20,20,0.98);
  border: 1px solid rgba(255,255,255,0.15);
  border-radius: 14px;
  box-shadow: 0 18px 50px rgba(0,0,0,0.55);
  padding: 12px;
}

.mini-popover__panel--wide{
  width: min(700px, calc(100vw - 28px));
}

.mini-popover__head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 12px;
  padding-bottom: 10px;
  border-bottom: 1px solid rgba(255,255,255,0.12);
}

.exh-table{
  display:grid;
  gap: 6px;
}

.exh-row{
  display:grid;
  grid-template-columns: 80px 1fr;
  gap: 12px;
  align-items:start;
  padding: 10px 10px;
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,0.10);
  background: rgba(255,255,255,0.04);
  color: inherit;
  text-align:left;
  cursor:pointer;
}

.cond-list{ display:grid; gap: 10px; }

.cond-item__row{
  display:flex;
  gap: 10px;
  align-items:center;
  justify-content:space-between;
}

.cond-list{
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
}

@media (max-width: 720px){
  .cond-list{ grid-template-columns: 1fr; }
}

.lss-langbox-head{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap:10px;
  margin-bottom:8px;
}

.lss-langbox-head-left{
  display:flex;
  align-items:baseline;
  gap:10px;
  flex-wrap:wrap;
}

.lss-langbox-list{
  display:grid;
  gap:8px;
}

.lss-langbox-list--cols3{
  grid-template-columns:repeat(3, minmax(0, 1fr));
}

@media (max-width: 820px){
  .lss-langbox-list--cols3{ grid-template-columns:repeat(2, minmax(0, 1fr)); }
}

@media (max-width: 520px){
  .lss-langbox-list--cols3{ grid-template-columns:1fr; }
}

.lss-lang-pill-head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:8px;
}

.lss-lang-pill-x{
  width:22px;
  height:22px;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  border-radius:8px;
  border:1px solid rgba(255,255,255,0.12);
  background:rgba(0,0,0,0.18);
  color:rgba(255,255,255,0.9);
  cursor:pointer;
  flex:0 0 auto;
}

.lss-lang-popup-grid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:14px;
}

@media (max-width: 820px){
  .lss-lang-popup-grid{ grid-template-columns:1fr; }
}

.lss-lang-row-head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
}

/* ===== Campaign maps: button row (GM) ===== */
.campaign-maps-row{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
}

/* ===== Campaign parameters modal (GM) ===== */
.cmp-overlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.55);
  display:flex;
  align-items:center;
  justify-content:center;
  padding:24px;
  z-index:9999;
}

.cmp-modal-header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:12px 14px;
  border-bottom:1px solid rgba(255,255,255,.1);
}

.cmp-toolbar{
  display:flex;
  align-items:center;
  gap:10px;
  margin-bottom:12px;
}

.cmp-dialog-row{
  display:grid;
  grid-template-columns: 90px 1fr;
  gap:10px;
  align-items:center;
  margin:8px 0;
}

.cmp-dialog-actions{ display:flex; gap:10px; justify-content:flex-end; margin-top:10px; }

.cmp-sections{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap:12px;
}

@media (max-width: 860px){
  .cmp-sections{ grid-template-columns: 1fr; }
}

.cmp-section-head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  margin-bottom:10px;
}

.cmp-section-actions{ display:flex; gap:8px; }

.cmp-map-row{
  display:grid;
  grid-template-columns: 1fr;
  gap:10px;
  padding:10px;
  border:1px solid rgba(255,255,255,.12);
  border-radius:12px;
  margin-bottom:10px;
  background:rgba(0,0,0,.18);
}

.cmp-map-actions{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
}

.cmp-move{ display:flex; gap:8px; align-items:center; }
